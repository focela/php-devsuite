; -----------------------------
; Global Configuration
; -----------------------------
[global]
; Path to the error log for the FPM master process
error_log = /proc/self/fd/2

; Prevent the process from daemonizing (run in the foreground)
daemonize = no

; -----------------------------
; Pool Configuration: www
; -----------------------------
[www]
; Log all access requests to the specified path
access.log = /proc/self/fd/2

; User and group for the FPM process
; Uncomment if needed for specific user requirements
; user = app
; group = app

; Socket configuration for FPM
listen = /sock/docker.sock
listen.owner = app
listen.group = app
listen.mode = 0660

; -----------------------------
; Process Management Configuration
; -----------------------------
; Enable dynamic process management
pm = dynamic

; Maximum number of child processes
pm.max_children = 10

; Number of child processes created on startup
pm.start_servers = 4

; Minimum number of spare child processes
pm.min_spare_servers = 2

; Maximum number of spare child processes
pm.max_spare_servers = 6

; -----------------------------
; Environment and Error Handling
; -----------------------------
; Allow PHP scripts to inherit environment variables
clear_env = no

; Ensure worker stdout and stderr are logged to the main error log
catch_workers_output = yes

; Enable process dumpability (needed for PHP-SPX)
process.dumpable = yes
